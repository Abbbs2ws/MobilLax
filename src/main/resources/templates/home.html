<!-- templates/home.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MobilLax</title>

  <link href="/css/style.css" type="text/css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" type="text/css" rel="stylesheet">
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=bbdb927adb59e986a99547b4bf19429a&libraries=services"></script>
  <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=tMyQEKvbLg6lALw2eWbA4841Al9zq0qr4V6vVMsO"></script>
  <script src="/javascript/jquery-1.12.3.js"></script>
  <script src="/javascript/script.js"></script>
</head>

<body>
<header>
  <h1>MobilLax</h1>
  <div class="auth-buttons">
    <div th:if="${#authorization.expression('isAuthenticated()')}">
      <a href="/mypage/info"><i class="fas fa-user-circle"></i> 마이페이지</a>
      <a href="/logout"><i class="fas fa-sign-out-alt"></i> 로그아웃</a>
    </div>
    <div th:unless="${#authorization.expression('isAuthenticated()')}">
      <a href="/login">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/login-rounded-right.png" alt="Login" style="vertical-align: middle; width: 20px; height: 20px;">
        로그인
      </a>
      <a href="/register">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/add-user-male.png" alt="SignUp" style="vertical-align: middle; width: 20px; height: 20px;">
        회원가입
      </a>
    </div>
  </div>
</header>

<main>
  <section class="search-card">
    <h2>빠른길찾기</h2>
    <form action="/transit/route" method="post">
      <div class="search-box">
        <div class="input-group">
          <i class="fas fa-location-arrow"></i>
          <input type="text" id="fromInput" name="fromName" placeholder="출발지 입력" required>
          <button type="submit"><i class="fas fa-search"></i></button>
          <div class="suggest-box" id="fromSuggestions"></div>
        </div>
        <button type="button" class="switch-button" onclick="swapInputs()">⇄</button>
        <div class="input-group">
          <i class="fas fa-map-marker-alt"></i>
          <input type="text" id="toInput" name="toName" placeholder="도착지 입력" required>
          <button type="submit"><i class="fas fa-search"></i></button>
          <div class="suggest-box" id="toSuggestions"></div>
        </div>
      </div>
      <div class="search-action">
        <button type="submit" class="find-route-button">길찾기</button>
      </div>
    </form>

    <div class="mode-select">
      <div class="mode-item"><i class="fas fa-subway"></i><span>대중교통</span></div>
      <div class="mode-item"><i class="fas fa-car"></i><span>자동차</span></div>
      <div class="mode-item"><i class="fas fa-walking"></i><span>도보</span></div>
      <div class="mode-item"><i class="fas fa-bicycle"></i><span>자전거</span></div>
    </div>

    <div class="related-links">
      관련
      <a href="https://search.naver.com/search.naver?where=m&query=지하철노선도" target="_blank">지하철노선도</a> ·
      <a href="#">기차승차권예매</a>
    </div>
  </section>
</main>

<section class="route-results" id="routeResults" th:if="${summaries != null}">
  <h2 style="text-align: center;">추천 경로</h2>
  <div class="route-result-list">
    <ul class="route-list">
      <li th:each="summary, stat : ${summaries}">
        <a th:href="@{/transit/detail(index=${stat.index})}">
          <span class="label">경로 [[${stat.index + 1}]]</span>
          <span class="detail">총 요금: [[${summary.totalFare}]]원, 시간: [[${summary.formattedTotalTime}]]</span>
          <span class="info">도보: [[${summary.formattedWalkDistance}]], 환승: [[${summary.transferCount}]]회</span>
        </a>
      </li>
    </ul>
  </div>
</section>

<footer>
  <div>© 2025 MobilLax. All rights reserved.</div>
</footer>
</body>
</html>
